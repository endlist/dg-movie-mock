function DgMovieFilterController(e,o){var t=e.$ctrl;t.decadeFilterValue=2010,o.setDecade(t.decadeFilterValue),e.$watch("$ctrl.decadeFilterValue",function(e,t){o.setDecade(parseInt(e))})}function DgMovieListController(e,t){var o=e.$ctrl,i=function(e){o.movies=e};t.getMovies().then(i),t.registerObserverCallback(function(){t.getMovies().then(i)})}function DgMovieController(e,t){var o=e.$ctrl;t.getMetadata(o.movie.imdbID).then(function(e){o.movie=_.assign({},o.movie,e.data),o.movie.imdbLink="https://www.imdb.com/title/"+o.movie.imdbID,o.movie.localImage="content/images/"+_.split(o.movie.Poster,"/")[5]})}DgMovieFilterController.$inject=["$scope","MovieSvc"],DgMovieListController.$inject=["$scope","MovieSvc"],DgMovieController.$inject=["$scope","MovieSvc"],angular.module("dgMovieApp",[]),(app=angular.module("dgMovieApp")).component("dgMovieFilter",{templateUrl:"templates/dgMovieFilter.html",controller:DgMovieFilterController}),(app=angular.module("dgMovieApp")).component("dgMovieList",{templateUrl:"templates/dgMovieList.html",controller:DgMovieListController}),(app=angular.module("dgMovieApp")).component("dgMovie",{templateUrl:"templates/dgMovie.html",controller:DgMovieController,bindings:{movie:"<"}});var app=angular.module("dgMovieApp"),apiKey="c2312eff";app.service("MovieSvc",["$http",function(t){var o={decade:0},i=[];return{setDecade:function(e){o.decade=e,this.notifyObservers()},registerObserverCallback:function(e){i.push(e)},notifyObservers:function(){_.forEach(i,function(e){e()})},filterResponse:function(e){var t=e.data.Search;return o.decade&&(t=_.filter(e.data.Search,function(e){var t=parseInt(e.Year.slice(0,4));return t>o.decade&&t<o.decade+10})),t},getApi:function(){return"&apikey="+apiKey},getMovies:function(){return t.get("http://www.omdbapi.com/?s=Batman"+this.getApi()).then(this.filterResponse).catch(function(e){})},getMetadata:function(e){return t.get("http://www.omdbapi.com/?i="+e+this.getApi())}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vdmllLWZpbHRlci5jb21wb25lbnQuanMiLCJtb3ZpZS1saXN0LmNvbXBvbmVudC5qcyIsIm1vdmllLmNvbXBvbmVudC5qcyIsImluZGV4LmpzIiwibW92aWUuc3ZjLmpzIl0sIm5hbWVzIjpbIkRnTW92aWVGaWx0ZXJDb250cm9sbGVyIiwiJHNjb3BlIiwiTW92aWVTdmMiLCIkY3RybCIsImRlY2FkZUZpbHRlclZhbHVlIiwic2V0RGVjYWRlIiwiJHdhdGNoIiwibmV3VmFsIiwib2xkVmFsIiwicGFyc2VJbnQiLCJEZ01vdmllTGlzdENvbnRyb2xsZXIiLCJzZXRNb3ZpZXMiLCJtb3ZpZXMiLCJnZXRNb3ZpZXMiLCJ0aGVuIiwicmVnaXN0ZXJPYnNlcnZlckNhbGxiYWNrIiwiRGdNb3ZpZUNvbnRyb2xsZXIiLCJnZXRNZXRhZGF0YSIsIm1vdmllIiwiaW1kYklEIiwicmVzcG9uc2UiLCJfIiwiYXNzaWduIiwiZGF0YSIsImltZGJMaW5rIiwibG9jYWxJbWFnZSIsInNwbGl0IiwiUG9zdGVyIiwiYW5ndWxhciIsIm1vZHVsZSIsImFwcCIsImNvbXBvbmVudCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImJpbmRpbmdzIiwiYXBpS2V5Iiwic2VydmljZSIsIiRodHRwIiwiX2ZpbHRlcnMiLCJkZWNhZGUiLCJfb2JzZXJ2ZXJDYWxsYmFja3MiLCJ0aGlzIiwibm90aWZ5T2JzZXJ2ZXJzIiwiY2FsbGJhY2siLCJwdXNoIiwiZm9yRWFjaCIsImZpbHRlclJlc3BvbnNlIiwiZmlsdGVyZWREYXRhIiwiU2VhcmNoIiwiZmlsdGVyIiwicmVsZWFzZURhdGUiLCJZZWFyIiwic2xpY2UiLCJnZXRBcGkiLCJnZXQiLCJjYXRjaCIsImVycm9yIiwiaWQiXSwibWFwcGluZ3MiOiJBQUVBLFNBQUFBLHdCQUFBQyxFQUFBQyxHQUNBLElBQUFDLEVBQUFGLEVBQUFFLE1BRUFBLEVBQUFDLGtCQUFBLEtBRUFGLEVBQUFHLFVBQUFGLEVBQUFDLG1CQUVBSCxFQUFBSyxPQUFBLDBCQUFBLFNBQUFDLEVBQUFDLEdBQ0FOLEVBQUFHLFVBQUFJLFNBQUFGLE1DUkEsU0FBQUcsc0JBQUFULEVBQUFDLEdBQ0EsSUFBQUMsRUFBQUYsRUFBQUUsTUFDQVEsRUFBQSxTQUFBQyxHQUNBVCxFQUFBUyxPQUFBQSxHQUdBVixFQUFBVyxZQUFBQyxLQUFBSCxHQUNBVCxFQUFBYSx5QkFBQSxXQUNBYixFQUFBVyxZQUFBQyxLQUFBSCxLQ1JBLFNBQUFLLGtCQUFBZixFQUFBQyxHQUNBLElBQUFDLEVBQUFGLEVBQUFFLE1BRUFELEVBQUFlLFlBQUFkLEVBQUFlLE1BQUFDLFFBQUFMLEtBQUEsU0FBQU0sR0FDQWpCLEVBQUFlLE1BQUFHLEVBQUFDLE9BQUEsR0FBQW5CLEVBQUFlLE1BQUFFLEVBQUFHLE1BQ0FwQixFQUFBZSxNQUFBTSxTQUFBLDhCQUFBckIsRUFBQWUsTUFBQUMsT0FDQWhCLEVBQUFlLE1BQUFPLFdBQUEsa0JBQUFKLEVBQUFLLE1BQUF2QixFQUFBZSxNQUFBUyxPQUFBLEtBQUEsK0pDUkFDLFFBQUFDLE9BQUEsYUFBQSxLSEFBQyxJQUFBRixRQUFBQyxPQUFBLGVBY0FFLFVBQUEsZ0JBQUEsQ0FDQUMsWUFBQSwrQkFDQUMsV0FBQWpDLDJCQ2hCQThCLElBQUFGLFFBQUFDLE9BQUEsZUFjQUUsVUFBQSxjQUNBLENBQ0FDLFlBQUEsNkJBQ0FDLFdBQUF2Qix5QkNqQkFvQixJQUFBRixRQUFBQyxPQUFBLGVBYUFFLFVBQUEsVUFDQSxDQUNBQyxZQUFBLHlCQUNBQyxXQUFBakIsa0JBQ0FrQixTQUFBLENBQ0FoQixNQUFBLE9FbEJBLElBQUFZLElBQUFGLFFBQUFDLE9BQUEsY0FDQU0sT0FBQSxXQUVBTCxJQUFBTSxRQUFBLFdBQUEsQ0FBQSxRQUFBLFNBQUFDLEdBQ0EsSUFBQUMsRUFBQSxDQUNBQyxPQUFBLEdBRUFDLEVBQUEsR0FFQSxNQUFBLENBQ0FuQyxVQUFBLFNBQUFrQyxHQUNBRCxFQUFBQyxPQUFBQSxFQUNBRSxLQUFBQyxtQkFFQTNCLHlCQUFBLFNBQUE0QixHQUNBSCxFQUFBSSxLQUFBRCxJQUVBRCxnQkFBQSxXQUNBckIsRUFBQXdCLFFBQUFMLEVBQUEsU0FBQUcsR0FDQUEsT0FHQUcsZUFBQSxTQUFBMUIsR0FDQSxJQUFBMkIsRUFBQTNCLEVBQUFHLEtBQUF5QixPQVNBLE9BUEFWLEVBQUFDLFNBQ0FRLEVBQUExQixFQUFBNEIsT0FBQTdCLEVBQUFHLEtBQUF5QixPQUFBLFNBQUE5QixHQUNBLElBQUFnQyxFQUFBekMsU0FBQVMsRUFBQWlDLEtBQUFDLE1BQUEsRUFBQSxJQUNBLE9BQUFGLEVBQUFaLEVBQUFDLFFBQUFXLEVBQUFaLEVBQUFDLE9BQUEsTUFJQVEsR0FFQU0sT0FBQSxXQUNBLE1BQUEsV0FBQWxCLFFBRUF0QixVQUFBLFdBQ0EsT0FBQXdCLEVBQUFpQixJQUFBLG1DQUFBYixLQUFBWSxVQUNBdkMsS0FBQTJCLEtBQUFLLGdCQUNBUyxNQUFBLFNBQUFDLE9BR0F2QyxZQUFBLFNBQUF3QyxHQUNBLE9BQUFwQixFQUFBaUIsSUFBQSw2QkFBQUcsRUFBQWhCLEtBQUFZIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZGdNb3ZpZUFwcCcpO1xuXG5mdW5jdGlvbiBEZ01vdmllRmlsdGVyQ29udHJvbGxlciAoJHNjb3BlLCBNb3ZpZVN2Yykge1xuICB2YXIgJGN0cmwgPSAkc2NvcGUuJGN0cmw7XG5cbiAgJGN0cmwuZGVjYWRlRmlsdGVyVmFsdWUgPSAyMDEwO1xuXG4gIE1vdmllU3ZjLnNldERlY2FkZSgkY3RybC5kZWNhZGVGaWx0ZXJWYWx1ZSk7XG5cbiAgJHNjb3BlLiR3YXRjaCgnJGN0cmwuZGVjYWRlRmlsdGVyVmFsdWUnLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICBNb3ZpZVN2Yy5zZXREZWNhZGUocGFyc2VJbnQobmV3VmFsKSk7XG4gIH0pO1xufVxuXG5hcHAuY29tcG9uZW50KCdkZ01vdmllRmlsdGVyJywge1xuICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9kZ01vdmllRmlsdGVyLmh0bWwnLFxuICBjb250cm9sbGVyOiBEZ01vdmllRmlsdGVyQ29udHJvbGxlclxufSk7XG4iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2RnTW92aWVBcHAnKTtcblxuZnVuY3Rpb24gRGdNb3ZpZUxpc3RDb250cm9sbGVyICgkc2NvcGUsIE1vdmllU3ZjKSB7XG4gIHZhciAkY3RybCA9ICRzY29wZS4kY3RybDtcbiAgdmFyIHNldE1vdmllcyA9IGZ1bmN0aW9uIChtb3ZpZXMpIHtcbiAgICAkY3RybC5tb3ZpZXMgPSBtb3ZpZXM7XG4gIH1cblxuICBNb3ZpZVN2Yy5nZXRNb3ZpZXMoKS50aGVuKHNldE1vdmllcyk7IC8vIGluaXRpYWxpemUgZGVmYXVsdCBkYXRhc2V0XG4gIE1vdmllU3ZjLnJlZ2lzdGVyT2JzZXJ2ZXJDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgTW92aWVTdmMuZ2V0TW92aWVzKCkudGhlbihzZXRNb3ZpZXMpO1xuICB9KTtcbn1cblxuYXBwLmNvbXBvbmVudCgnZGdNb3ZpZUxpc3QnLFxuIHtcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9kZ01vdmllTGlzdC5odG1sJyxcbiAgICBjb250cm9sbGVyOiBEZ01vdmllTGlzdENvbnRyb2xsZXJcbiB9XG4pO1xuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdkZ01vdmllQXBwJyk7XG5cbmZ1bmN0aW9uIERnTW92aWVDb250cm9sbGVyICgkc2NvcGUsIE1vdmllU3ZjKSB7XG4gIHZhciAkY3RybCA9ICRzY29wZS4kY3RybDtcblxuICBNb3ZpZVN2Yy5nZXRNZXRhZGF0YSgkY3RybC5tb3ZpZS5pbWRiSUQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgJGN0cmwubW92aWUgPSBfLmFzc2lnbih7fSwgJGN0cmwubW92aWUsIHJlc3BvbnNlLmRhdGEpO1xuICAgICRjdHJsLm1vdmllLmltZGJMaW5rID0gJ2h0dHBzOi8vd3d3LmltZGIuY29tL3RpdGxlLycgKyAkY3RybC5tb3ZpZS5pbWRiSUQ7XG4gICAgJGN0cmwubW92aWUubG9jYWxJbWFnZSA9ICdjb250ZW50L2ltYWdlcy8nICsgXy5zcGxpdCgkY3RybC5tb3ZpZS5Qb3N0ZXIsICcvJylbNV07XG4gIH0pO1xuXG59XG5cbmFwcC5jb21wb25lbnQoJ2RnTW92aWUnLFxuIHtcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9kZ01vdmllLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6IERnTW92aWVDb250cm9sbGVyLFxuICAgIGJpbmRpbmdzOiB7XG4gICAgICBtb3ZpZTogJzwnXG4gICAgfVxuIH1cbik7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZGdNb3ZpZUFwcCcsIFtdKTtcbiIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZGdNb3ZpZUFwcCcpO1xudmFyIGFwaUtleSA9ICdjMjMxMmVmZic7IC8vIFRPRE86IG1vdmUgdG8gc3lzdGVtIHZhclxuXG5hcHAuc2VydmljZSgnTW92aWVTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgdmFyIF9maWx0ZXJzID0ge1xuICAgIGRlY2FkZTogMFxuICB9O1xuICB2YXIgX29ic2VydmVyQ2FsbGJhY2tzID0gW107XG5cbiAgcmV0dXJuIHtcbiAgICBzZXREZWNhZGU6IGZ1bmN0aW9uIChkZWNhZGUpIHtcbiAgICAgIF9maWx0ZXJzLmRlY2FkZSA9IGRlY2FkZTtcbiAgICAgIHRoaXMubm90aWZ5T2JzZXJ2ZXJzKCk7XG4gICAgfSxcbiAgICByZWdpc3Rlck9ic2VydmVyQ2FsbGJhY2s6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgX29ic2VydmVyQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH0sXG4gICAgbm90aWZ5T2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgICBfLmZvckVhY2goX29ic2VydmVyQ2FsbGJhY2tzLCBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZmlsdGVyUmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgdmFyIGZpbHRlcmVkRGF0YSA9IHJlc3BvbnNlLmRhdGEuU2VhcmNoO1xuXG4gICAgICBpZiAoX2ZpbHRlcnMuZGVjYWRlKSB7XG4gICAgICAgIGZpbHRlcmVkRGF0YSA9IF8uZmlsdGVyKHJlc3BvbnNlLmRhdGEuU2VhcmNoLCBmdW5jdGlvbihtb3ZpZSkge1xuICAgICAgICAgIHZhciByZWxlYXNlRGF0ZSA9IHBhcnNlSW50KG1vdmllLlllYXIuc2xpY2UoMCw0KSk7XG4gICAgICAgICAgcmV0dXJuIChyZWxlYXNlRGF0ZSA+IF9maWx0ZXJzLmRlY2FkZSAmJiByZWxlYXNlRGF0ZSA8IF9maWx0ZXJzLmRlY2FkZSArIDEwKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmaWx0ZXJlZERhdGE7XG4gICAgfSxcbiAgICBnZXRBcGk6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnJmFwaWtleT0nICsgYXBpS2V5O1xuICAgIH0sXG4gICAgZ2V0TW92aWVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCdodHRwOi8vd3d3Lm9tZGJhcGkuY29tLz9zPUJhdG1hbicgKyB0aGlzLmdldEFwaSgpKVxuICAgICAgICAudGhlbih0aGlzLmZpbHRlclJlc3BvbnNlKVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0TWV0YWRhdGE6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldCgnaHR0cDovL3d3dy5vbWRiYXBpLmNvbS8/aT0nICsgaWQgKyB0aGlzLmdldEFwaSgpKTtcbiAgICB9XG4gIH1cbn0pO1xuIl19
